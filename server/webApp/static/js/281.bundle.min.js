"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[281],{4281:(e,a,t)=>{t.r(a),t.d(a,{default:()=>k});var n,o=t(2928),s=t(885),l=t(7294),c=t(405),d=t(743),i=t(3519),r=t(6655),m=t(897),v=t(5388),u=t(7921),h=t(7710),f=t(3194),Z=t(500),S=t(2325),p=t(9250),b=t(5589),g=t(9569),y=t(3820),N=t(5188),C=t(4145),T=t(9460);const w=function(e){var a=(0,p.TH)(),t=e.translation,c=e.setTranslation,r=e.translatedSchema,m=e.setTranslatedSchema,v=e.isLoading,u=e.ext,w=e.setSchemaFormat,j=e.formId,k=(0,d.v9)(i.jl),z=(0,d.v9)(f.Rb),D=z&&z[u]?Object.entries(z[u]).map((function(e){var a=(0,s.Z)(e,2),t=a[0];return{value:a[1],label:t}})):[];(0,l.useEffect)((function(){a.state&&Object.keys(z).map((function(e){var t=e.toLowerCase();Object.entries(z[e]).map((function(e){var n=(0,s.Z)(e,2),o=n[0],l=n[1];l==a.state&&(w({value:t,label:t}),c({value:l,label:o}))}))}))}),[]);return(0,o.Z)("div",{className:"card"},void 0,(0,o.Z)("div",{className:"card-header p-2"},void 0,(0,o.Z)("div",{className:"row no-gutters"},void 0,(0,o.Z)("div",{className:"col-md-6"},void 0,(0,o.Z)(g.ZP,{id:"translation-list",data:D,onChange:function(e){for(var a=[],t=0;t<Object.values(e).length;t++)a.push(Object.values(e)[t]);c(a),m(h.initConvertedSchemaState)},placeholder:"Translate to...(select at least one)",value:t,isMultiSelect:!0,isSmStyle:!0,isClearable:!0})),(0,o.Z)("div",{className:"col-md-6 align-self-center"},void 0,(0,o.Z)("div",{className:"".concat(1==r.length&&r[0].schema?"":" d-none")},void 0,(0,o.Z)(Z.Z,{buttonId:"copyTranslatededSchema",data:r[0].schema,customClass:"float-end"}),(0,o.Z)(y.ZP,{buttonId:"schemaDownload",data:r[0].schema,ext:1==t.length?t[0].value:t,customClass:"me-1 float-end"}),(0,o.Z)("div",{className:"".concat(r[0].fmt==T.zh.toUpperCase()?"":" d-none")},void 0,n||(n=(0,o.Z)(C.Z,{buttonId:"jadnBaseTypesDownload",buttonTitle:"Download JADN Base Types Schema",fileName:"jadn_base_types.xsd",customClass:"me-1 float-end"})))),(0,o.Z)(N.Z,{buttonId:"translateSchema",buttonTitle:"Translate the given JADN schema to the selected format",buttonTxt:"Translate",customClass:"me-1 float-end",isLoading:v,formId:j,isDisabled:0==Object.keys(k).length||0==t.length})))),(0,o.Z)("div",{className:"card-body-page"},void 0,t.length>1&&r.length>1?(0,o.Z)(b.Z,{data:r}):(0,o.Z)(S.Z,{data:r[0].schema,isReadOnly:!0,convertTo:1==t.length?t[0].value:t})))};var j;const k=function(){var e=(0,d.I0)(),a=(0,l.useState)(null),t=(0,s.Z)(a,2),n=t[0],f=t[1],Z=(0,l.useState)(null),S=(0,s.Z)(Z,2),p=S[0],b=S[1],g=(0,l.useState)(null),y=(0,s.Z)(g,2),N=y[0],C=y[1],T=(0,l.useState)([]),k=(0,s.Z)(T,2),z=k[0],D=k[1],F=(0,l.useState)(h.initConvertedSchemaState),I=(0,s.Z)(F,2),O=I[0],x=I[1],L=(0,l.useState)(!1),E=(0,s.Z)(L,2),_=E[0],J=E[1],R=(0,d.v9)(i.pz)+" | Schema Translation",A="".concat(window.location.origin).concat(window.location.pathname),B="translation_form";(0,l.useEffect)((function(){e((0,r.um)()),(0,u.wu)()}),[e]),(0,l.useEffect)((function(){x(h.initConvertedSchemaState),D([])}),[N,p]);return(0,o.Z)("div",{},void 0,(0,o.Z)(c.ql,{},void 0,(0,o.Z)("title",{},void 0,R),(0,o.Z)("link",{rel:"canonical",href:A})),(0,o.Z)("div",{className:"row"},void 0,(0,o.Z)("div",{className:"col-md-12"},void 0,(0,o.Z)("div",{className:"card"},void 0,(0,o.Z)("div",{className:"card-header bg-secondary p-2"},void 0,(0,o.Z)("h5",{className:"m-0",style:{display:"inline"}},void 0,j||(j=(0,o.Z)("span",{className:"align-middle"},void 0,"Schema Translation"))),(0,o.Z)("button",{type:"reset",className:"btn btn-sm btn-danger float-end",onClick:function(a){a.preventDefault(),(0,u.wu)(),J(!1),f(null),C(null),D([]),b(null),x(h.initConvertedSchemaState),e((0,m.LN)(null))}},void 0,"Reset")),(0,o.Z)("div",{className:"card-body p-2"},void 0,(0,o.Z)("form",{id:B,onSubmit:function(a){if(a.preventDefault(),J(!0),z){var t=N;if("string"==typeof t)try{t=JSON.parse(N)}catch(e){e instanceof Error&&(J(!1),(0,u.gz)(e.message))}var n=z.map((function(e){return e.value}));e((0,r.v4)(t,null==p?void 0:p.value,n)).then((function(e){if(e.error)return J(!1),x(h.initConvertedSchemaState),void(0,u.gz)(e.payload.response);J(!1),x(e.payload.schema.convert);for(var a=e.payload.schema.convert.map((function(e){return e.fmt_ext})),t=0;t<n.length;t++)a.includes(n[t])?0==e.payload.schema.convert[t].err?(0,u.T9)("Schema translated to ".concat(e.payload.schema.convert[t].fmt," successfully")):(0,u.gz)("Schema failed to translate to ".concat(e.payload.schema.convert[t].fmt," ").concat(e.payload.schema.convert[t].schema?": ".concat(e.payload.schema.convert[t].schema):"")):(0,u.gz)("Failed to translate to ".concat(z[t].label))})).catch((function(e){x(h.initConvertedSchemaState),J(!1),(0,u.gz)(e)}))}else x(h.initConvertedSchemaState),J(!1),(0,u.gz)("No language selected for translation")}},void 0,(0,o.Z)("div",{className:"row"},void 0,(0,o.Z)("div",{className:"col-md-6 pr-1"},void 0,(0,o.Z)(v.Z,{selectedFile:n,setSelectedFile:f,schemaFormat:p,setSchemaFormat:b,loadedSchema:N,setLoadedSchema:C,acceptFormat:[".json"]})),(0,o.Z)("div",{className:"col-md-6 pl-1"},void 0,(0,o.Z)(w,{formId:B,translatedSchema:O,setTranslatedSchema:x,translation:z,setTranslation:D,setSchemaFormat:b,isLoading:_,ext:null==p?void 0:p.value})))))))))}}}]);
//# sourceMappingURL=281.bundle.min.js.map