"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[885],{3820:(e,a,t)=>{t.d(a,{ZP:()=>w});var n,o,c,l,s,i,r,d=t(2928),u=t(1002),m=t(885),v=t(7294),f=t(9417),p=t(982),b=t(7921),Z=t(1144),h=t(6683),y=t(3162),g=t.n(y),N=t(9460);const w=function(e){var a,t=e.buttonId,y=e.data,w=e.customClass,S=e.filename,O=e.ext,C=void 0===O?N.yA:O,D=(0,v.useState)(S),j=(0,m.Z)(D,2),k=j[0],P=j[1],R=(0,v.useState)(!1),x=(0,m.Z)(R,2),I=x[0],E=x[1],A=(0,v.useState)(!1),F=(0,m.Z)(A,2),T=F[0],L=F[1];a=C==N.X1?n||(n=(0,d.Z)(p.G,{icon:f.gSj})):C==N.Tx||C==N.dK?o||(o=(0,d.Z)(p.G,{icon:f.Oi0})):c||(c=(0,d.Z)(p.G,{icon:f.kwI}));var z=function(e,a){if(e.preventDefault(),""!=k&&null!=k)if(N.VN.test(k)){switch(a){case N.X1:!function(e){e.preventDefault();var a="".concat(k,".pdf");L(!0);try{fetch("/api/convert/pdf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({schema:y})}).then((function(e){return e.blob()})).then((function(e){var t=document.createElement("a");t.href=URL.createObjectURL(e),t.download=a,document.body.appendChild(t),t.click(),t.remove(),URL.revokeObjectURL(t.href)})).catch((function(e){console.log(e),(0,b.gz)("PDF cannot be downloaded")}))}catch(e){console.log(e),(0,b.gz)("PDF cannot be downloaded")}(0,b.T9)("PDF downloaded successfully")}(e);break;case N.Tx:!function(e){var a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"graphviz";e.preventDefault();var n=null===(a=document.getElementById("fullGV"))||void 0===a?void 0:a.innerHTML;if(n){var o=new Blob([n],{type:"image/svg+xml"});g()(o,"".concat(t,".svg"))}else(0,b.gz)("Error: Unable to download GraphViz file.")}(e,k);break;case N.dK:!function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"plantuml";g()(e,"".concat(a,".png"))}(y,k);break;default:!function(e,a){if(e.preventDefault(),y){L(!0);try{var t="".concat(k,".").concat(a),n="object"==(0,u.Z)(y)?(0,h.ny)(y):y,o=new Blob([n],{type:"application/json"}),c=document.createElement("a");c.href=URL.createObjectURL(o),c.download=t,document.body.appendChild(c),c.click(),setTimeout((function(){c.remove(),URL.revokeObjectURL(c.href)}),0),(0,b.T9)("File downloaded")}catch(e){console.log(e),(0,b.gz)("File cannot be downloaded")}}else(0,b.gz)("No data to download")}(e,C)}L(!1),E(!1)}else(0,b.e)("Please do not use special characters in file name.");else(0,b.e)("Please enter a file name.")};return v.createElement(v.Fragment,null,T?l||(l=(0,d.Z)(Z.Z,{color:"primary"})):(0,d.Z)("button",{id:t||"downloadBtn",type:"button",title:"Download ".concat(C," File"),className:"btn btn-sm btn-primary "+w,onClick:function(e){e.preventDefault(),E(!0)}},void 0,a),(0,d.Z)("div",{id:"downloadFileModal",className:"modal fade ".concat(I?"show d-block":"d-none"),tabIndex:-1,role:"dialog"},void 0,(0,d.Z)("div",{className:"modal-dialog modal-dialog-centered",role:"document"},void 0,(0,d.Z)("div",{className:"modal-content"},void 0,(0,d.Z)("div",{className:"modal-header"},void 0,s||(s=(0,d.Z)("div",{className:"form col"},void 0,(0,d.Z)("div",{className:"form row"},void 0,(0,d.Z)("h5",{className:"modal-title"},void 0,"Download As...")),(0,d.Z)("div",{className:"form row"},void 0,(0,d.Z)("small",{className:"text-muted"},void 0," ","Download file to local computer")))),(0,d.Z)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",title:"Close",onClick:function(){return E(!1)}})),(0,d.Z)("div",{className:"modal-body"},void 0,(0,d.Z)("div",{className:"row"},void 0,i||(i=(0,d.Z)("label",{htmlFor:"filenameDownload",className:"col-sm-4 col-label"},void 0,"File name:")),(0,d.Z)("div",{className:"col-sm-8"},void 0,(0,d.Z)("input",{id:"filenameDownload",className:"form-control",type:"text",autoFocus:!0,value:k,onChange:function(e){P(e.target.value)}}))),(0,d.Z)("div",{className:"row"},void 0,r||(r=(0,d.Z)("label",{htmlFor:"downloadFileAsType",className:"col-sm-4 col-label"},void 0,"Save as type:")),(0,d.Z)("div",{className:"col-sm-8"},void 0,(0,d.Z)("input",{type:"text",readOnly:!0,className:"form-control-plaintext",id:"downloadFileAsType",value:C})))),(0,d.Z)("div",{className:"modal-footer"},void 0,(0,d.Z)("button",{type:"button",className:"btn btn-sm btn-success",onClick:function(e){return z(e,C)}},void 0,"Download"),(0,d.Z)("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:function(){L(!1),E(!1)}},void 0,"Cancel")))),(0,d.Z)("div",{className:"modal-backdrop fade ".concat(I?"show":""),style:{zIndex:-1}})))}},5188:(e,a,t)=>{t.d(a,{Z:()=>d});var n,o,c=t(2928),l=t(7294),s=t(1144),i=t(982),r=t(9417);const d=function(e){var a=e.buttonId,t=e.buttonTxt,d=e.customClass,u=e.isLoading,m=e.isDisabled,v=e.buttonTitle,f=e.formId;return l.createElement(l.Fragment,null,u?n||(n=(0,c.Z)(s.Z,{color:"success"})):(0,c.Z)("button",{id:a||"submitBtn",type:"submit",form:f,title:v||"Submit",className:"btn btn-sm btn-success border-0 hoverSubmit "+d,disabled:m},void 0,(0,c.Z)("span",{},void 0,t||"Submit"),o||(o=(0,c.Z)(i.G,{icon:r.XCy}))))}},6885:(e,a,t)=>{t.r(a),t.d(a,{default:()=>G});var n,o,c=t(2928),l=t(2982),s=t(885),i=t(7294),r=t(405),d=t(743),u=t(3519),m=t(7057),v=t(7921),f=t(5861),p=t(2167),b=t(4687),Z=t.n(b),h=t(8721),y=t(9417),g=t(982),N=t(897),w=t(9460),S=t(3432),O=t(2325),C=t(9569);function D(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function j(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?D(Object(t),!0).forEach((function(a){(0,p.Z)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):D(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}const k=(0,i.forwardRef)((function(e,a){var t=e.onLoading,r=e.selectedSchemas,m=e.onSelectedSchemaAdd,b=e.onSelectedSchemaReplaceAll,D=e.onSelectedSchemaRemove,k=(0,d.I0)(),P=(0,i.useState)(null),R=(0,s.Z)(P,2),x=R[0],I=R[1],E=(0,i.useRef)(null),A=(0,i.useState)([]),F=(0,s.Z)(A,2),T=F[0],L=F[1],z=(0,i.useState)({}),U=(0,s.Z)(z,2),G=U[0],_=U[1],J=(0,d.v9)(u._r);(0,i.useEffect)((function(){k((0,N.um)())}),[k]),(0,i.useImperativeHandle)(a,(function(){return{onReset:function(){(0,v.wu)(),_({}),I(null),L([])}}}));var B=function(e){e.preventDefault(),t(!1),I(null)},M=function(){var e=(0,f.Z)(Z().mark((function e(a){var t,n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("file"!=a.value){e.next=3;break}return null===(t=E.current)||void 0===t||t.click(),e.abrupt("return");case 3:return D(""),n=[],e.next=7,Promise.all(a.map(function(){var e=(0,f.Z)(Z().mark((function e(a){var t,o;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c=a.label,k((0,N.xl)("schemas",c)).then((function(e){return e.payload.data})).catch((function(e){(0,v.gz)(e.payload.data)}));case 2:t=e.sent,o={id:(0,h.Z)(),name:a.label,type:"schemas",data:t},n.push(o);case 5:case"end":return e.stop()}var c}),e)})));return function(a){return e.apply(this,arguments)}}()));case 7:b(n),L((0,l.Z)(a));case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),H=null==r?void 0:r.map((function(e,a){return(0,c.Z)("div",{className:"card"},e.id,(0,c.Z)("div",{className:"card-header"},void 0,(0,c.Z)("h5",{className:"mb-0 d-flex justify-content-between align-items-center"},void 0,(0,c.Z)("button",{className:"err"==e.data?"btn":"btn btn-link",id:"toggleMsg#".concat(a),type:"button",onClick:function(){var e;e=a,_((function(a){return j(j({},a),{},(0,p.Z)({},e,!a[e]))}))}},void 0,e.name," ","err"==e.data?(0,c.Z)(g.G,{style:{color:"red"},title:"Invalid JADN. Please remove or fix schema.",icon:y.RLE}):""),(0,c.Z)("button",{id:"removeFile",type:"button",className:"btn btn-sm btn-danger",onClick:function(){return a=e.name,D(a),void L(T.filter((function(e){return e.value!==a})));var a}},void 0,n||(n=(0,c.Z)(g.G,{icon:y.$aW}))))),1==G[a]&&"err"!=e.data?(0,c.Z)("div",{className:"card-body"},e.id,(0,c.Z)(O.Z,{data:e.data,isReadOnly:!0,height:"35vh"})):"")}));return(0,c.Z)("div",{className:"card"},void 0,(0,c.Z)("div",{className:"card-header p-2"},void 0,(0,c.Z)("div",{className:"row no-gutters"},void 0,(0,c.Z)("div",{className:"col-md-6"},void 0,(0,c.Z)("div",{className:"".concat("file"==x?" d-none":"")},void 0,(0,c.Z)("div",{className:"input-group"},void 0,(0,c.Z)(C.ZP,{id:"schema-list",data:J,onChange:M,placeholder:"Select schema...(at least one)",loc:"schemas",value:T,isGrouped:!0,isFileUploader:!0,isMultiSelect:!0,isSmStyle:!0,isClearable:!0}))),(0,c.Z)("div",{className:"".concat("file"==x?"":" d-none"),style:{display:"inline"}},void 0,i.createElement("input",{type:"file",id:"file-input",name:"file-input",accept:w.yA,onChange:function(e){(e.preventDefault(),t(!0),e.target.files&&0!=e.target.files.length)&&Array.prototype.slice.call(e.target.files).forEach((function(e){if(t=e.name,o=!1,null==(n=r)||n.map((function(e){t==e.name&&(o=!0)})),o)(0,v.gz)("".concat(e.name," already exists"));else{var a=new FileReader;a.onload=function(a){if(a.target&&a.target.result&&(0,S.HD)(a.target.result))try{var t=JSON.parse(a.target.result),n={id:(0,h.Z)(),name:e.name,type:"schemas",data:t};m(n),L([].concat((0,l.Z)(T),[{value:e.name,label:e.name}]))}catch(e){(0,v.gz)("File cannot be loaded: Invalid JSON")}},a.readAsText(e)}var t,n,o}));I(null),t(!1)},ref:E,multiple:!0}),(0,c.Z)("button",{id:"cancelFileUpload",type:"button",className:"btn btn-sm btn-secondary ms-0",onClick:function(){return B},style:{display:"inline"}},void 0,o||(o=(0,c.Z)(g.G,{icon:y.g82}))))))),(0,c.Z)("div",{className:"card-body-page"},void 0,H))}));var P=t(1002),R=t(2326),x=t(500),I=t(4858),E=t(3820),A=t(5188);function F(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function T(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?F(Object(t),!0).forEach((function(a){(0,p.Z)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):F(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var L={schema:"",schema_name:"",schema_fmt:""};const z=(0,i.forwardRef)((function(e,a){var t=e.isLoading,n=e.onLoading,o=e.onSelectedSchemaReplaceAll,l=e.selectedSchemas,r=e.formId,u=(0,d.I0)(),f=(0,d.v9)(R.$),b=(0,i.useState)({}),Z=(0,s.Z)(b,2),h=Z[0],y=Z[1],g=(0,i.useState)(!0),N=(0,s.Z)(g,2),S=N[0],D=N[1],j=(0,i.useState)(),k=(0,s.Z)(j,2),F=k[0],z=k[1],U=(0,i.useState)(),G=(0,s.Z)(U,2),_=G[0],J=G[1],B=(0,i.useState)([]),M=(0,s.Z)(B,2),H=M[0],V=M[1],X=(0,i.useState)([L]),K=(0,s.Z)(X,2),$=K[0],q=K[1];(0,i.useEffect)((function(){q([L]),z(null)}),[l]),(0,i.useEffect)((function(){D(!0),l&&l.length>0&&_&&_.value&&("strip comments"==_.value&&D(!1),"resolve references"==_.value&&F&&D(!1));var e=l.map((function(e){return e.name}));V(e)}),[l,F,_]),(0,i.useImperativeHandle)(a,(function(){return{onReset:function(){(0,v.wu)(),y({}),z(null),q([L]),J(null)}}}));return(0,c.Z)("div",{className:"card"},void 0,(0,c.Z)("div",{className:"card-header p-2"},void 0,(0,c.Z)("form",{id:r,onSubmit:function(e){e.preventDefault(),n(!0);var a=null!=F&&F.value?F.value:"";u((0,m.wr)(l,_.value,a)).then((function(e){if(1==e.error){var a=[];if("object"==(0,P.Z)(e.payload.response)){e.payload.response.forEach((function(e){(0,v.gz)("".concat(e.name," : ").concat(e.err)),a.push(e.name)}));var t=l.map((function(e){return a.includes(e.name)?T(T({},e),{},{data:"err"}):e}));o(t)}else(0,v.gz)(e.payload.response)}else(0,v.T9)("Transformed Schema successfully"),q(e.payload)})).catch((function(e){(0,v.gz)(e)})).finally((function(){n(!1)}))}},void 0,(0,c.Z)("div",{className:"row no-gutters"},void 0,(0,c.Z)("div",{className:"col-md-9"},void 0,(0,c.Z)("div",{className:"row"},void 0,(0,c.Z)("div",{className:"col-sm-6"},void 0,(0,c.Z)(C.ZP,{id:"transformation-list",data:f,onChange:function(e){z(null),q([L]),J(e)},placeholder:"Select transformation type...",value:_,isSmStyle:!0,isClearable:!0})),(0,c.Z)("div",{className:"col-sm-6 ".concat("resolve references"==(null==_?void 0:_.value)?"":" d-none")},void 0,(0,c.Z)(C.ZP,{id:"base-file",data:H,onChange:function(e){q([L]),z(e)},placeholder:"Select base file...",value:F,isSmStyle:!0,isClearable:!0,customNoOptionMsg:"Select a schema to begin"})))),(0,c.Z)("div",{className:"col-md-3 align-self-center"},void 0,(0,c.Z)("div",{className:"".concat($&&1==$.length&&""!=$[0].schema?"":" d-none")},void 0,(0,c.Z)(x.Z,{buttonId:"copyConvertedSchema",data:$[0].schema,customClass:"float-end"}),(0,c.Z)(I.Z,{data:$[0].schema,loc:"schemas",customClass:"me-1 float-end",filename:null==F?void 0:F.value,ext:$[0].schema_fmt||w.yA}),(0,c.Z)(E.ZP,{buttonId:"schemaDownload",customClass:"me-1 float-end",filename:null==F?void 0:F.value,data:$[0].schema,ext:$[0].schema_fmt||w.yA})),(0,c.Z)(A.Z,{buttonId:"transformSchema",buttonTitle:"Process JADN schema(s) to produce another JADN schema",buttonTxt:"Transform",customClass:"me-1 float-end",isLoading:t,formId:r,isDisabled:S}))))),(0,c.Z)("div",{className:"card-body-page"},void 0,$.length>1?$.map((function(e,a){return(0,c.Z)("div",{className:"card"},a,(0,c.Z)("div",{className:"card-header"},void 0,(0,c.Z)("h5",{className:"mb-0"},void 0,(0,c.Z)("button",{className:"btn btn-link",id:"toggleSchema#".concat(a),type:"button",onClick:function(){return e=a,void y((function(a){return T(T({},a),{},(0,p.Z)({},e,!a[e]))}));var e}},void 0,e.schema_name),(0,c.Z)(x.Z,{buttonId:"copySchema".concat(a),data:e.schema,customClass:"float-end"}),(0,c.Z)(I.Z,{data:e.schema,loc:"schemas",customClass:"float-end me-1",filename:"".concat(e.schema_name),ext:w.yA}),(0,c.Z)(E.ZP,{buttonId:"downloadSchema".concat(a),customClass:"me-1 float-end",filename:"".concat(e.schema_name),data:e.schema,ext:w.yA}))),1==h[a]?(0,c.Z)("div",{className:"card-body"},a,(0,c.Z)(O.Z,{data:e.schema,isReadOnly:!0,height:"35vh"})):"")})):(0,c.Z)(O.Z,{data:$[0].schema,isReadOnly:!0})))}));var U;const G=function(){var e=(0,d.I0)(),a=(0,i.useRef)(),t=(0,i.useRef)(),n=(0,i.useState)([]),o=(0,s.Z)(n,2),f=o[0],p=o[1],b=(0,i.useRef)([]),Z=(0,i.useState)(!1),h=(0,s.Z)(Z,2),y=h[0],g=h[1],N=(0,d.v9)(u.pz)+" | Schema Transformation",w="".concat(window.location.origin).concat(window.location.pathname);(0,i.useEffect)((function(){e((0,m.um)()),(0,v.wu)()}),[e]),(0,i.useEffect)((function(){f.length>0&&(b.current=(0,l.Z)(f))}),[f]);var S=function(e){null==e||e.map((function(e){e.data||b.current.map((function(a){e.name==a.name&&(e.data=a.data)}))})),p((0,l.Z)(e))},O=function(e){g(e)};return(0,c.Z)("div",{},void 0,(0,c.Z)(r.ql,{},void 0,(0,c.Z)("title",{},void 0,N),(0,c.Z)("link",{rel:"canonical",href:w})),(0,c.Z)("div",{className:"row"},void 0,(0,c.Z)("div",{className:"col-md-12"},void 0,(0,c.Z)("div",{className:"card"},void 0,(0,c.Z)("div",{className:"card-header bg-secondary p-2"},void 0,(0,c.Z)("h5",{className:"m-0",style:{display:"inline"}},void 0,U||(U=(0,c.Z)("span",{className:"align-middle"},void 0,"Schema Transformation"))),(0,c.Z)("button",{type:"reset",className:"btn btn-sm btn-danger float-end",onClick:function(e){var n,o;e.preventDefault(),(0,v.wu)(),p([]),null===(n=a.current)||void 0===n||n.onReset(),null===(o=t.current)||void 0===o||o.onReset()}},void 0,"Reset")),(0,c.Z)("div",{className:"card-body p-2"},void 0,(0,c.Z)("div",{className:"row"},void 0,(0,c.Z)("div",{className:"col-md-6 pr-1"},void 0,i.createElement(k,{ref:t,isLoading:y,onLoading:O,selectedSchemas:f,onSelectedSchemaAdd:function(e){p([].concat((0,l.Z)(f),[e]))},onSelectedSchemaReplaceAll:S,onSelectedSchemaRemove:function(e){p(e?f.filter((function(a){return a.name!==e})):[])}})),(0,c.Z)("div",{className:"col-md-6 pl-1"},void 0,i.createElement(z,{ref:a,isLoading:y,selectedSchemas:f,onSelectedSchemaReplaceAll:S,onLoading:O,formId:"transformation_form"}))))))))}}}]);
//# sourceMappingURL=885.bundle.min.js.map